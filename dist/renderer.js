(()=>{"use strict";const e=()=>new Promise((e=>{const t=document.querySelector(".list-back");t&&(t.click(),setTimeout((()=>{e()}),300))})),t=async(t,n=!1)=>{const o=document.querySelector(".group-assistent-list")&&n;o&&await e();const r=n?t>0?"ArrowUp":"ArrowDown":"",c=Array.from(document.querySelectorAll('.recent-contact-list:not([style="display: none;"]) .viewport-list__inner > .recent-contact-item'));if(o&&"ArrowUp"===r){const e=c.findIndex((e=>"群助手"===e.querySelector(".text-ellipsis > span").textContent));t=Math.max(0,e-1),0===e&&(t=c.length-1)}else if(o&&"ArrowDown"===r){const e=c.findIndex((e=>"群助手"===e.querySelector(".text-ellipsis > span").textContent));t=Math.min(c.length-1,e+1),e>=c.length-1&&(t=0)}const s=c[t];s.querySelector(".text-ellipsis > span").textContent,(e=>{const t=new Event("mousedown");e.dispatchEvent(t)})(s)};try{(async(e,t={})=>{const{container:n=document,timeout:o=0,delay:r=100}=t;return new Promise((t=>{let c,s=n.querySelector(e);if(s)return t(s);const i=new window.MutationObserver((n=>{for(let o of n)for(let n of o.addedNodes)console.log("addedNode",n),n.nodeType===Node.ELEMENT_NODE&&(s=n.matches(e)?n:n.querySelector(e),s&&(i.disconnect(),c&&clearTimeout(c),setTimeout((()=>t(s)),r)))}));i.observe(n,{childList:!0,subtree:!0}),o>0&&(c=setTimeout((()=>(i.disconnect(),t(null))),o))}))})(".viewport-list .viewport-list__inner").then((()=>{(async()=>{window.addEventListener("keydown",(function(n){const o=new Set(["1","2","3","4","5","6","7","8","9"]),r=new Set(["ArrowUp","ArrowDown","Backspace"]);if(n.altKey&&!n.ctrlKey&&!n.shiftKey&&!n.metaKey)if(o.has(n.key))t(Number(n.key)-1);else if("Backspace"!==n.key){if(r.has(n.key)){const e=document.querySelector('.recent-contact-list:not([style="display: none;"]) .viewport-list__inner'),o=e.querySelector(".recent-contact-item.recent-contact-item--selected"),r=e.children;if(!o)return void t(0);const c=(e=>{const t=e.parentElement;return t?Array.from(t.children).indexOf(e):-1})(o);if(-1===c)return;if("ArrowUp"===n.key){let e=c-1;e<0?(e=r.length-1,t(e,!0)):t(e,!1)}if("ArrowDown"===n.key){let e=c+1;e>=r.length?(e=0,t(e,!0)):t(e,!1)}}}else e()}))})().then((()=>{console.log("[快速切换聊天窗口]: 启动成功!")}))}))}catch(e){console.error("[快速切换聊天窗口]: 初始化失败!",e)}})();